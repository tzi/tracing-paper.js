<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <title>tracing-paper.js</title>
    <link rel="stylesheet" href="stylesheets/demo.css">
</head>
<body>

<div id="gmap"></div>
<canvas id="tracing-paper">Your browser does not support the canvas element.</canvas>

<form name="controls" class="controls">
    <input type="text" name="coordinates" value="43.923538,4.506712" />
    <button type="submit">Move</button>
</form>

<div class="actions">
    <form name="enlarge">
        <button type="submit">Agrandir le claque</button>
    </form>
    <form name="reduce">
        <button type="submit">RÃ©duire le calque</button>
    </form>
    <form name="reset">
        <button type="submit">Reset</button>
    </form>
    <form name="undo">
        <button type="submit">Undo</button>
    </form>
    <form name="export">
        <button type="submit">Export as SVG path</button>
    </form>
</div>

<script src="src/rounding.js"></script>
<script src="src/tracing-paper.js"></script>
<script>
    var map;
    function initMap() {
        map = new google.maps.Map(document.getElementById('gmap'), {
            center: {lat: 43.923538, lng: 4.506712},
            zoom: 15,
            mapTypeId: google.maps.MapTypeId.SATELLITE,
            disableDefaultUI: true
        });
    }

    var size = 500;
    var canvas = document.getElementById('tracing-paper');
    var tracingPaper = TracingPaper(canvas, 150, 150);
    tracingPaper.resize(size, size);

    document.forms['controls'].addEventListener('submit', function(event) {
        event.preventDefault();
        var coords = document.forms['controls'].coordinates.value.split(',');
        var center = new google.maps.LatLng(coords[0], coords[1]);
        map.setCenter(center);
    });

    document.forms['enlarge'].addEventListener('submit', function(event) {
        event.preventDefault();
        size += 50;
        tracingPaper.resize(size, size);
    });

    document.forms['reduce'].addEventListener('submit', function(event) {
        event.preventDefault();
        size -= 50;
        tracingPaper.resize(size, size);
    });

    document.forms['reset'].addEventListener('submit', function(event) {
        event.preventDefault();
        tracingPaper.reset();
    });

    document.forms['undo'].addEventListener('submit', function(event) {
        event.preventDefault();
        tracingPaper.removeLastPoint();
    });

    document.forms['export'].addEventListener('submit', function(event) {
        event.preventDefault();
        alert(tracingPaper.toSVGPath());
    });
</script>
<script src="http://maps.googleapis.com/maps/api/js?sensor=false&extension=.js&callback=initMap"></script>

</body>
</html>